
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Linux 101 课程讲义">
      
      
      
        <meta name="author" content="LUG@USTC">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.5">
    
    
      
        <title>讲义 - Linux 101</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.be71726b.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../css/extra.css">
    
    
      
  



  
  



  <script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-160637954-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
  <script async src="https://www.google-analytics.com/analytics.js"></script>


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#docker" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Linux 101" class="md-header__button md-logo" aria-label="Linux 101" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M220.8 123.3c1 .5 1.8 1.7 3 1.7 1.1 0 2.8-.4 2.9-1.5.2-1.4-1.9-2.3-3.2-2.9-1.7-.7-3.9-1-5.5-.1-.4.2-.8.7-.6 1.1.3 1.3 2.3 1.1 3.4 1.7zm-21.9 1.7c1.2 0 2-1.2 3-1.7 1.1-.6 3.1-.4 3.5-1.6.2-.4-.2-.9-.6-1.1-1.6-.9-3.8-.6-5.5.1-1.3.6-3.4 1.5-3.2 2.9.1 1 1.8 1.5 2.8 1.4zM420 403.8c-3.6-4-5.3-11.6-7.2-19.7-1.8-8.1-3.9-16.8-10.5-22.4-1.3-1.1-2.6-2.1-4-2.9-1.3-.8-2.7-1.5-4.1-2 9.2-27.3 5.6-54.5-3.7-79.1-11.4-30.1-31.3-56.4-46.5-74.4-17.1-21.5-33.7-41.9-33.4-72C311.1 85.4 315.7.1 234.8 0 132.4-.2 158 103.4 156.9 135.2c-1.7 23.4-6.4 41.8-22.5 64.7-18.9 22.5-45.5 58.8-58.1 96.7-6 17.9-8.8 36.1-6.2 53.3-6.5 5.8-11.4 14.7-16.6 20.2-4.2 4.3-10.3 5.9-17 8.3s-14 6-18.5 14.5c-2.1 3.9-2.8 8.1-2.8 12.4 0 3.9.6 7.9 1.2 11.8 1.2 8.1 2.5 15.7.8 20.8-5.2 14.4-5.9 24.4-2.2 31.7 3.8 7.3 11.4 10.5 20.1 12.3 17.3 3.6 40.8 2.7 59.3 12.5 19.8 10.4 39.9 14.1 55.9 10.4 11.6-2.6 21.1-9.6 25.9-20.2 12.5-.1 26.3-5.4 48.3-6.6 14.9-1.2 33.6 5.3 55.1 4.1.6 2.3 1.4 4.6 2.5 6.7v.1c8.3 16.7 23.8 24.3 40.3 23 16.6-1.3 34.1-11 48.3-27.9 13.6-16.4 36-23.2 50.9-32.2 7.4-4.5 13.4-10.1 13.9-18.3.4-8.2-4.4-17.3-15.5-29.7zM223.7 87.3c9.8-22.2 34.2-21.8 44-.4 6.5 14.2 3.6 30.9-4.3 40.4-1.6-.8-5.9-2.6-12.6-4.9 1.1-1.2 3.1-2.7 3.9-4.6 4.8-11.8-.2-27-9.1-27.3-7.3-.5-13.9 10.8-11.8 23-4.1-2-9.4-3.5-13-4.4-1-6.9-.3-14.6 2.9-21.8zM183 75.8c10.1 0 20.8 14.2 19.1 33.5-3.5 1-7.1 2.5-10.2 4.6 1.2-8.9-3.3-20.1-9.6-19.6-8.4.7-9.8 21.2-1.8 28.1 1 .8 1.9-.2-5.9 5.5-15.6-14.6-10.5-52.1 8.4-52.1zm-13.6 60.7c6.2-4.6 13.6-10 14.1-10.5 4.7-4.4 13.5-14.2 27.9-14.2 7.1 0 15.6 2.3 25.9 8.9 6.3 4.1 11.3 4.4 22.6 9.3 8.4 3.5 13.7 9.7 10.5 18.2-2.6 7.1-11 14.4-22.7 18.1-11.1 3.6-19.8 16-38.2 14.9-3.9-.2-7-1-9.6-2.1-8-3.5-12.2-10.4-20-15-8.6-4.8-13.2-10.4-14.7-15.3-1.4-4.9 0-9 4.2-12.3zm3.3 334c-2.7 35.1-43.9 34.4-75.3 18-29.9-15.8-68.6-6.5-76.5-21.9-2.4-4.7-2.4-12.7 2.6-26.4v-.2c2.4-7.6.6-16-.6-23.9-1.2-7.8-1.8-15 .9-20 3.5-6.7 8.5-9.1 14.8-11.3 10.3-3.7 11.8-3.4 19.6-9.9 5.5-5.7 9.5-12.9 14.3-18 5.1-5.5 10-8.1 17.7-6.9 8.1 1.2 15.1 6.8 21.9 16l19.6 35.6c9.5 19.9 43.1 48.4 41 68.9zm-1.4-25.9c-4.1-6.6-9.6-13.6-14.4-19.6 7.1 0 14.2-2.2 16.7-8.9 2.3-6.2 0-14.9-7.4-24.9-13.5-18.2-38.3-32.5-38.3-32.5-13.5-8.4-21.1-18.7-24.6-29.9s-3-23.3-.3-35.2c5.2-22.9 18.6-45.2 27.2-59.2 2.3-1.7.8 3.2-8.7 20.8-8.5 16.1-24.4 53.3-2.6 82.4.6-20.7 5.5-41.8 13.8-61.5 12-27.4 37.3-74.9 39.3-112.7 1.1.8 4.6 3.2 6.2 4.1 4.6 2.7 8.1 6.7 12.6 10.3 12.4 10 28.5 9.2 42.4 1.2 6.2-3.5 11.2-7.5 15.9-9 9.9-3.1 17.8-8.6 22.3-15 7.7 30.4 25.7 74.3 37.2 95.7 6.1 11.4 18.3 35.5 23.6 64.6 3.3-.1 7 .4 10.9 1.4 13.8-35.7-11.7-74.2-23.3-84.9-4.7-4.6-4.9-6.6-2.6-6.5 12.6 11.2 29.2 33.7 35.2 59 2.8 11.6 3.3 23.7.4 35.7 16.4 6.8 35.9 17.9 30.7 34.8-2.2-.1-3.2 0-4.2 0 3.2-10.1-3.9-17.6-22.8-26.1-19.6-8.6-36-8.6-38.3 12.5-12.1 4.2-18.3 14.7-21.4 27.3-2.8 11.2-3.6 24.7-4.4 39.9-.5 7.7-3.6 18-6.8 29-32.1 22.9-76.7 32.9-114.3 7.2zm257.4-11.5c-.9 16.8-41.2 19.9-63.2 46.5-13.2 15.7-29.4 24.4-43.6 25.5s-26.5-4.8-33.7-19.3c-4.7-11.1-2.4-23.1 1.1-36.3 3.7-14.2 9.2-28.8 9.9-40.6.8-15.2 1.7-28.5 4.2-38.7 2.6-10.3 6.6-17.2 13.7-21.1.3-.2.7-.3 1-.5.8 13.2 7.3 26.6 18.8 29.5 12.6 3.3 30.7-7.5 38.4-16.3 9-.3 15.7-.9 22.6 5.1 9.9 8.5 7.1 30.3 17.1 41.6 10.6 11.6 14 19.5 13.7 24.6zM173.3 148.7c2 1.9 4.7 4.5 8 7.1 6.6 5.2 15.8 10.6 27.3 10.6 11.6 0 22.5-5.9 31.8-10.8 4.9-2.6 10.9-7 14.8-10.4s5.9-6.3 3.1-6.6-2.6 2.6-6 5.1c-4.4 3.2-9.7 7.4-13.9 9.8-7.4 4.2-19.5 10.2-29.9 10.2s-18.7-4.8-24.9-9.7c-3.1-2.5-5.7-5-7.7-6.9-1.5-1.4-1.9-4.6-4.3-4.9-1.4-.1-1.8 3.7 1.7 6.5z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Linux 101
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              讲义
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="切换至深色模式"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="切换至深色模式" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="切换至浅色模式"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="切换至浅色模式" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/ustclug/Linux101-docs/" title="前往 GitHub 仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
  </div>
  <div class="md-source__repository">
    ustclug/Linux101-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Linux 101" class="md-nav__button md-logo" aria-label="Linux 101" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M220.8 123.3c1 .5 1.8 1.7 3 1.7 1.1 0 2.8-.4 2.9-1.5.2-1.4-1.9-2.3-3.2-2.9-1.7-.7-3.9-1-5.5-.1-.4.2-.8.7-.6 1.1.3 1.3 2.3 1.1 3.4 1.7zm-21.9 1.7c1.2 0 2-1.2 3-1.7 1.1-.6 3.1-.4 3.5-1.6.2-.4-.2-.9-.6-1.1-1.6-.9-3.8-.6-5.5.1-1.3.6-3.4 1.5-3.2 2.9.1 1 1.8 1.5 2.8 1.4zM420 403.8c-3.6-4-5.3-11.6-7.2-19.7-1.8-8.1-3.9-16.8-10.5-22.4-1.3-1.1-2.6-2.1-4-2.9-1.3-.8-2.7-1.5-4.1-2 9.2-27.3 5.6-54.5-3.7-79.1-11.4-30.1-31.3-56.4-46.5-74.4-17.1-21.5-33.7-41.9-33.4-72C311.1 85.4 315.7.1 234.8 0 132.4-.2 158 103.4 156.9 135.2c-1.7 23.4-6.4 41.8-22.5 64.7-18.9 22.5-45.5 58.8-58.1 96.7-6 17.9-8.8 36.1-6.2 53.3-6.5 5.8-11.4 14.7-16.6 20.2-4.2 4.3-10.3 5.9-17 8.3s-14 6-18.5 14.5c-2.1 3.9-2.8 8.1-2.8 12.4 0 3.9.6 7.9 1.2 11.8 1.2 8.1 2.5 15.7.8 20.8-5.2 14.4-5.9 24.4-2.2 31.7 3.8 7.3 11.4 10.5 20.1 12.3 17.3 3.6 40.8 2.7 59.3 12.5 19.8 10.4 39.9 14.1 55.9 10.4 11.6-2.6 21.1-9.6 25.9-20.2 12.5-.1 26.3-5.4 48.3-6.6 14.9-1.2 33.6 5.3 55.1 4.1.6 2.3 1.4 4.6 2.5 6.7v.1c8.3 16.7 23.8 24.3 40.3 23 16.6-1.3 34.1-11 48.3-27.9 13.6-16.4 36-23.2 50.9-32.2 7.4-4.5 13.4-10.1 13.9-18.3.4-8.2-4.4-17.3-15.5-29.7zM223.7 87.3c9.8-22.2 34.2-21.8 44-.4 6.5 14.2 3.6 30.9-4.3 40.4-1.6-.8-5.9-2.6-12.6-4.9 1.1-1.2 3.1-2.7 3.9-4.6 4.8-11.8-.2-27-9.1-27.3-7.3-.5-13.9 10.8-11.8 23-4.1-2-9.4-3.5-13-4.4-1-6.9-.3-14.6 2.9-21.8zM183 75.8c10.1 0 20.8 14.2 19.1 33.5-3.5 1-7.1 2.5-10.2 4.6 1.2-8.9-3.3-20.1-9.6-19.6-8.4.7-9.8 21.2-1.8 28.1 1 .8 1.9-.2-5.9 5.5-15.6-14.6-10.5-52.1 8.4-52.1zm-13.6 60.7c6.2-4.6 13.6-10 14.1-10.5 4.7-4.4 13.5-14.2 27.9-14.2 7.1 0 15.6 2.3 25.9 8.9 6.3 4.1 11.3 4.4 22.6 9.3 8.4 3.5 13.7 9.7 10.5 18.2-2.6 7.1-11 14.4-22.7 18.1-11.1 3.6-19.8 16-38.2 14.9-3.9-.2-7-1-9.6-2.1-8-3.5-12.2-10.4-20-15-8.6-4.8-13.2-10.4-14.7-15.3-1.4-4.9 0-9 4.2-12.3zm3.3 334c-2.7 35.1-43.9 34.4-75.3 18-29.9-15.8-68.6-6.5-76.5-21.9-2.4-4.7-2.4-12.7 2.6-26.4v-.2c2.4-7.6.6-16-.6-23.9-1.2-7.8-1.8-15 .9-20 3.5-6.7 8.5-9.1 14.8-11.3 10.3-3.7 11.8-3.4 19.6-9.9 5.5-5.7 9.5-12.9 14.3-18 5.1-5.5 10-8.1 17.7-6.9 8.1 1.2 15.1 6.8 21.9 16l19.6 35.6c9.5 19.9 43.1 48.4 41 68.9zm-1.4-25.9c-4.1-6.6-9.6-13.6-14.4-19.6 7.1 0 14.2-2.2 16.7-8.9 2.3-6.2 0-14.9-7.4-24.9-13.5-18.2-38.3-32.5-38.3-32.5-13.5-8.4-21.1-18.7-24.6-29.9s-3-23.3-.3-35.2c5.2-22.9 18.6-45.2 27.2-59.2 2.3-1.7.8 3.2-8.7 20.8-8.5 16.1-24.4 53.3-2.6 82.4.6-20.7 5.5-41.8 13.8-61.5 12-27.4 37.3-74.9 39.3-112.7 1.1.8 4.6 3.2 6.2 4.1 4.6 2.7 8.1 6.7 12.6 10.3 12.4 10 28.5 9.2 42.4 1.2 6.2-3.5 11.2-7.5 15.9-9 9.9-3.1 17.8-8.6 22.3-15 7.7 30.4 25.7 74.3 37.2 95.7 6.1 11.4 18.3 35.5 23.6 64.6 3.3-.1 7 .4 10.9 1.4 13.8-35.7-11.7-74.2-23.3-84.9-4.7-4.6-4.9-6.6-2.6-6.5 12.6 11.2 29.2 33.7 35.2 59 2.8 11.6 3.3 23.7.4 35.7 16.4 6.8 35.9 17.9 30.7 34.8-2.2-.1-3.2 0-4.2 0 3.2-10.1-3.9-17.6-22.8-26.1-19.6-8.6-36-8.6-38.3 12.5-12.1 4.2-18.3 14.7-21.4 27.3-2.8 11.2-3.6 24.7-4.4 39.9-.5 7.7-3.6 18-6.8 29-32.1 22.9-76.7 32.9-114.3 7.2zm257.4-11.5c-.9 16.8-41.2 19.9-63.2 46.5-13.2 15.7-29.4 24.4-43.6 25.5s-26.5-4.8-33.7-19.3c-4.7-11.1-2.4-23.1 1.1-36.3 3.7-14.2 9.2-28.8 9.9-40.6.8-15.2 1.7-28.5 4.2-38.7 2.6-10.3 6.6-17.2 13.7-21.1.3-.2.7-.3 1-.5.8 13.2 7.3 26.6 18.8 29.5 12.6 3.3 30.7-7.5 38.4-16.3 9-.3 15.7-.9 22.6 5.1 9.9 8.5 7.1 30.3 17.1 41.6 10.6 11.6 14 19.5 13.7 24.6zM173.3 148.7c2 1.9 4.7 4.5 8 7.1 6.6 5.2 15.8 10.6 27.3 10.6 11.6 0 22.5-5.9 31.8-10.8 4.9-2.6 10.9-7 14.8-10.4s5.9-6.3 3.1-6.6-2.6 2.6-6 5.1c-4.4 3.2-9.7 7.4-13.9 9.8-7.4 4.2-19.5 10.2-29.9 10.2s-18.7-4.8-24.9-9.7c-3.1-2.5-5.7-5-7.7-6.9-1.5-1.4-1.9-4.6-4.3-4.9-1.4-.1-1.8 3.7 1.7 6.5z"/></svg>

    </a>
    Linux 101
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/ustclug/Linux101-docs/" title="前往 GitHub 仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
  </div>
  <div class="md-source__repository">
    ustclug/Linux101-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      <label class="md-nav__link" for="__nav_1">
        负一：计划规格
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="负一：计划规格" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          负一：计划规格
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Spec/writing/" class="md-nav__link">
        章节编写指导
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Spec/slide/" class="md-nav__link">
        演示文稿规格
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../preface/" class="md-nav__link">
        序
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        零：欢迎
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="零：欢迎" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          零：欢迎
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        欢迎
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notations/" class="md-nav__link">
        记号约定
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../credits/" class="md-nav__link">
        功劳簿
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        一：初识 Linux
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="一：初识 Linux" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          一：初识 Linux
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Ch01/" class="md-nav__link">
        讲义
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Ch01/supplement/" class="md-nav__link">
        拓展阅读
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Ch01/solution/" class="md-nav__link">
        思考题解答
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        二：个性化配置与建站体验
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="二：个性化配置与建站体验" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          二：个性化配置与建站体验
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Ch02/" class="md-nav__link">
        讲义
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Ch02/supplement/" class="md-nav__link">
        拓展阅读
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Ch02/solution/" class="md-nav__link">
        思考题解答
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      <label class="md-nav__link" for="__nav_6">
        三：软件安装与文件操作
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="三：软件安装与文件操作" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          三：软件安装与文件操作
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Ch03/" class="md-nav__link">
        讲义
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Ch03/supplement/" class="md-nav__link">
        拓展阅读
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Ch03/solution/" class="md-nav__link">
        思考题解答
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      <label class="md-nav__link" for="__nav_7">
        四：进程、前后台、服务与例行性任务
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="四：进程、前后台、服务与例行性任务" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          四：进程、前后台、服务与例行性任务
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Ch04/" class="md-nav__link">
        讲义
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Ch04/supplement/" class="md-nav__link">
        拓展阅读
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Ch04/solution/" class="md-nav__link">
        思考题解答
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      <label class="md-nav__link" for="__nav_8">
        五：用户与用户组、文件权限、文件系统层次结构
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="五：用户与用户组、文件权限、文件系统层次结构" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          五：用户与用户组、文件权限、文件系统层次结构
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Ch05/" class="md-nav__link">
        讲义
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Ch05/supplement/" class="md-nav__link">
        拓展阅读
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Ch05/solution/" class="md-nav__link">
        思考题解答
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      <label class="md-nav__link" for="__nav_9">
        六：网络下载工具与 Shell 脚本
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="六：网络下载工具与 Shell 脚本" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          六：网络下载工具与 Shell 脚本
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Ch06/" class="md-nav__link">
        讲义
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Ch06/supplement/" class="md-nav__link">
        拓展阅读
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Ch06/solution/" class="md-nav__link">
        思考题解答
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      <label class="md-nav__link" for="__nav_10">
        七：Linux 上的编程
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="七：Linux 上的编程" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          七：Linux 上的编程
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Ch07/" class="md-nav__link">
        讲义
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Ch07/supplement/" class="md-nav__link">
        拓展阅读
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" checked>
      
      <label class="md-nav__link" for="__nav_11">
        八：Docker
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="八：Docker" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          八：Docker
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          讲义
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        讲义
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#why-docker" class="md-nav__link">
    为什么使用 Docker？
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-docker" class="md-nav__link">
    安装 Docker
  </a>
  
    <nav class="md-nav" aria-label="安装 Docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-on-windows-or-macos" class="md-nav__link">
    在 Windows 或 macOS 上安装
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-on-linux" class="md-nav__link">
    在 Linux 上安装
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup-registry-mirror" class="md-nav__link">
    配置 Registry Mirror（可选，推荐）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify-docker-setup" class="md-nav__link">
    使用 Hello World 测试 Docker 安装
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-docker" class="md-nav__link">
    使用 Docker 容器
  </a>
  
    <nav class="md-nav" aria-label="使用 Docker 容器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-ubuntu-bash" class="md-nav__link">
    在 Ubuntu 容器中使用 shell
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-python-repl" class="md-nav__link">
    在 Python 容器中使用 Python 命令行
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-mkdocs-material-build" class="md-nav__link">
    在 MkDocs 容器中构建本书
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-docker-image" class="md-nav__link">
    构建自己的 Docker 镜像
  </a>
  
    <nav class="md-nav" aria-label="构建自己的 Docker 镜像">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#build-manually" class="md-nav__link">
    手工构建镜像
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-with-dockerfile" class="md-nav__link">
    使用 Dockerfile 自动化构建
  </a>
  
    <nav class="md-nav" aria-label="使用 Dockerfile 自动化构建">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cross-compile-example" class="md-nav__link">
    构建简单的交叉编译环境
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flask-production-example" class="md-nav__link">
    在生产环境中运行使用 Flask 编写的简单网站
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-compose" class="md-nav__link">
    使用 Docker Compose 自动运行容器
  </a>
  
    <nav class="md-nav" aria-label="使用 Docker Compose 自动运行容器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    子项目？
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="supplement/" class="md-nav__link">
        拓展阅读
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12" type="checkbox" id="__nav_12" >
      
      <label class="md-nav__link" for="__nav_12">
        九：Shell 文字处理工具与正则表达式
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="九：Shell 文字处理工具与正则表达式" data-md-level="1">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          九：Shell 文字处理工具与正则表达式
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Ch09/" class="md-nav__link">
        讲义
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Ch09/supplement/" class="md-nav__link">
        拓展阅读
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13" type="checkbox" id="__nav_13" >
      
      <label class="md-nav__link" for="__nav_13">
        附录
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="附录" data-md-level="1">
        <label class="md-nav__title" for="__nav_13">
          <span class="md-nav__icon md-icon"></span>
          附录
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Appendix/glossary/" class="md-nav__link">
        词汇表
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Appendix/man/" class="md-nav__link">
        man 文档的一些示例
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Appendix/distribution/" class="md-nav__link">
        其他的 Linux 发行版：技术差异简介
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../postface/" class="md-nav__link">
        跋
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#why-docker" class="md-nav__link">
    为什么使用 Docker？
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-docker" class="md-nav__link">
    安装 Docker
  </a>
  
    <nav class="md-nav" aria-label="安装 Docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-on-windows-or-macos" class="md-nav__link">
    在 Windows 或 macOS 上安装
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-on-linux" class="md-nav__link">
    在 Linux 上安装
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup-registry-mirror" class="md-nav__link">
    配置 Registry Mirror（可选，推荐）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify-docker-setup" class="md-nav__link">
    使用 Hello World 测试 Docker 安装
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-docker" class="md-nav__link">
    使用 Docker 容器
  </a>
  
    <nav class="md-nav" aria-label="使用 Docker 容器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-ubuntu-bash" class="md-nav__link">
    在 Ubuntu 容器中使用 shell
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-python-repl" class="md-nav__link">
    在 Python 容器中使用 Python 命令行
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-mkdocs-material-build" class="md-nav__link">
    在 MkDocs 容器中构建本书
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-docker-image" class="md-nav__link">
    构建自己的 Docker 镜像
  </a>
  
    <nav class="md-nav" aria-label="构建自己的 Docker 镜像">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#build-manually" class="md-nav__link">
    手工构建镜像
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-with-dockerfile" class="md-nav__link">
    使用 Dockerfile 自动化构建
  </a>
  
    <nav class="md-nav" aria-label="使用 Dockerfile 自动化构建">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cross-compile-example" class="md-nav__link">
    构建简单的交叉编译环境
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flask-production-example" class="md-nav__link">
    在生产环境中运行使用 Flask 编写的简单网站
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-compose" class="md-nav__link">
    使用 Docker Compose 自动运行容器
  </a>
  
    <nav class="md-nav" aria-label="使用 Docker Compose 自动运行容器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    子项目？
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ustclug/Linux101-docs/edit/master/docs/Ch08/index.md" title="编辑此页" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="docker">八：Docker<a class="headerlink" href="#docker" title="Permanent link">&para;</a></h1>
<div class="admonition failure">
<p class="admonition-title">本文目前尚未完稿，存在诸多未尽章节且未经审阅，不是正式版本。</p>
</div>
<div class="admonition abstract">
<p class="admonition-title">导言</p>
<p>「容器」，是近年来非常热门的一个概念。它通过操作系统内核提供的隔离技术，实现轻量级的虚拟化环境。目前，它在软件的开发、部署等方面有着非常广泛的应用。</p>
<p>而 Docker，是 Linux 容器技术中的代表性软件，它为用户提供了方便的接口来创建、使用 Linux 容器。下面，就让我们简单地入门一下 Docker。</p>
</div>
<h2 id="why-docker">为什么使用 Docker？<a class="headerlink" href="#why-docker" title="Permanent link">&para;</a></h2>
<p>Docker 能够利用 Linux 内核的容器特性，隔离出一个轻便的环境来运行程序。这有什么意义呢？试想以下这些情况：</p>
<ul>
<li>你运行的 Linux 发行版很老，而你需要运行一个更新版本的 Linux 发行版，或者完全不同的 Linux 发行版设计的程序。</li>
<li>你和朋友在设计一个大型的程序，而因为你们配置的环境不同，有时候在某个人的机器上正常运行的程序，在另一台机器上没法正常运行。</li>
<li>你希望在多台服务器上部署一个项目，但是项目需要非常复杂的配置，一个一个配置服务器的成本非常大。</li>
<li>…………</li>
</ul>
<p>Docker 就可以帮助解决这些问题。它可以快速配置不同的环境（比如说，通过 Docker，你可以在 Ubuntu 上使用 CentOS 的环境），部署应用。</p>
<h2 id="install-docker">安装 Docker<a class="headerlink" href="#install-docker" title="Permanent link">&para;</a></h2>
<p>Docker 可以在 Windows, Linux 和 macOS 上安装。下面我们讨论内容都基于 Docker 免费的社区版本。</p>
<h3 id="install-on-windows-or-macos">在 Windows 或 macOS 上安装<a class="headerlink" href="#install-on-windows-or-macos" title="Permanent link">&para;</a></h3>
<p>上面提到，Docker 使用了 Linux 内核的容器特性，它依赖于 Linux。所以在 Windows 和 macOS 上，Docker 不得不通过虚拟 Linux 内核的方式来完成任务。其提供了一套被称为 Docker Desktop 的软件来帮助在 Windows 和 macOS 上配置 Docker。直接从<a href="https://www.docker.com/products/docker-desktop">官网下载</a>即可。</p>
<div class="admonition info">
<p class="admonition-title">Docker Desktop on Windows 的环境要求</p>
<p>Docker Desktop on Windows 要求系统为 64 位的 Windows 10 专业版，硬件支持 Hyper-V 虚拟化且 Hyper-V 已经开启。如果使用 Windows 20H1 之前的版本且开启 Hyper-V 的情况下，如 VirtuaBox 和 VMware Workstation 等虚拟机软件无法正常使用；在 20H1 之后，虚拟机软件也需要升级到对应的版本才能与 Hyper-V 协同工作。如果环境要求无法达到，可以安装<a href="https://docs.docker.com/toolbox/toolbox_install_windows/">老版本的 Docker Toolbox on Windows</a>。</p>
</div>
<div class="admonition note">
<p class="admonition-title">Windows 容器</p>
<p>你可能会搜索到，Docker 也支持「Windows 容器」。是的，在新版本（1607 之后）的 Windows 10 中，Windows 内核支持 Windows 容器。可以在这样的容器中运行 Windows 程序。如果你感兴趣，可以阅读<a href="https://docs.microsoft.com/en-us/virtualization/windowscontainers/">微软的 Containers on Windows Documentation</a> 和 <a href="https://www.docker.com/products/windows-containers">Docker Windows Containers 的介绍</a>。这样的容器无法运行 Linux 程序，下面也不会涉及到。</p>
</div>
<h3 id="install-on-linux">在 Linux 上安装<a class="headerlink" href="#install-on-linux" title="Permanent link">&para;</a></h3>
<p>各大发行版的软件源包含 Docker，也可以跟从<a href="https://docs.docker.com/install/linux/docker-ce/debian/">官方文档</a>，安装其提供的 Docker 社区版本。</p>
<div class="admonition info">
<p class="admonition-title">docker, docker.io 和 docker-ce</p>
<p>首先，在 Debian/Ubuntu 上，<strong>不要运行 <code>sudo apt install docker</code></strong>。现在，这里安装的 <code>docker</code> 是一个系统托盘程序，和本章的 Docker <strong>没有任何关系</strong>。</p>
<p><code>docker.io</code> 是由 Debian/Ubuntu 维护的 Docker 版本，和软件源里的其他程序一样，它比官方的最新版本要稍微老一些。它所依赖的程序库由 Debian/Ubuntu 软件源中的其他软件包提供。</p>
<p>而 <code>docker-ce</code> 是由 Docker 官方维护的。它依赖的程序库都被打包在了这个包中。本章中，可以安装这两个版本中的任意一个。</p>
<p>Docker 官方提供了安装 Docker 社区版本的简易安装脚本：</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>curl -fsSL https://get.docker.com -o get-docker.sh
<span class="gp">$ </span>sudo sh get-docker.sh
</code></pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">不要在 WSL1 上安装 Docker</p>
<p>WSL1 在 Windows 上提供了方便的 Linux 环境。但很遗憾，Docker 的核心服务无法在 WSL1 上运行，直接安装是无法使用的。虽然可以把 WSL 中的 Docker 的命令行工具连接到 Docker for Windows 的核心服务上，但是比较麻烦，这里不推荐这样做。</p>
<p>如果你正在使用 WSL2，可以安装 Docker，并且使用 Windows 下的 Docker Desktop 进行管理，详细信息可阅读 <a href="https://code.visualstudio.com/blogs/2020/03/02/docker-in-wsl2">Using Docker in WSL 2</a>。</p>
</div>
<p>在安装完成后，可以使用</p>
<div class="codehilite"><pre><span></span><code>adduser 用户名 docker
</code></pre></div>

<p>将需要使用 Docker 的用户<a href="../Ch05/#adduser">加入</a> <code>docker</code> 用户组。<strong>注意：<code>docker</code> 用户组中的用户拥有与 root 等效的权限。</strong></p>
<h3 id="setup-registry-mirror">配置 Registry Mirror（可选，推荐）<a class="headerlink" href="#setup-registry-mirror" title="Permanent link">&para;</a></h3>
<div class="admonition warning">
<p class="admonition-title">本节内容可能随时过时</p>
<p>维护公共使用的 Docker Hub pull-through cache (registry mirror) 需要<strong>非常高的运维成本</strong>，因而有很多服务在之前可以使用，但是之后被迫关闭或转为非公开。你可以参考 <a href="https://yeasy.gitbook.io/docker_practice/install/mirror#bu-zai-ti-gong-fu-wu-de-jing-xiang">https://yeasy.gitbook.io/docker_practice/install/mirror#bu-zai-ti-gong-fu-wu-de-jing-xiang</a> 获取目前可能可以使用的 registry mirror（镜像加速器）。</p>
</div>
<p>Docker 默认从 Docker Hub 上拖取所需要的镜像。但由于网络原因，拖取的过程可能会比较慢。一些服务在中国提供了 Docker Hub 的镜像（反代缓存）。以下内容以网易云与百度云为例。</p>
<p>为了使用这些 Docker Hub 镜像，在 Debian/Ubuntu 上，可以编辑 <code>/etc/docker/daemon.json</code> 文件（如果文件不存在，请新建一个），写入以下内容。</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;registry-mirrors&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;https://hub-mirror.c.163.com&quot;</span><span class="p">,</span>
    <span class="s2">&quot;https://mirror.baidubce.com&quot;</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>使用 <code>sudo systemctl restart docker</code> 命令重启 Docker 服务后，再次运行 <code>docker info</code> 命令，可以看到如下输出：</p>
<div class="highlight"><pre><span></span><code> Registry Mirrors:
  https://hub-mirror.c.163.com/
  https://mirror.baidubce.com/
</code></pre></div>
<p>如果你看到了上面的输出，说明你的 Docker Registry Mirror 已经配置好了。</p>
<div class="admonition info">
<p class="admonition-title">如果你是科大校园网用户</p>
<p>科大镜像站的 Docker Hub registry mirror 目前仅对校园网开放，地址为 <code>https://docker.mirrors.ustc.edu.cn/</code>。如果在使用以上获取的 registry mirror 时遇到问题，可以切换。需要注意由于 2020 年 11 月之后 Docker Hub 的访问速率限制，使用时可能会出现间歇性的问题。</p>
<p>详细信息见科大镜像站 <a href="https://mirrors.ustc.edu.cn/help/dockerhub.html">Docker Hub 源使用帮助</a>。</p>
</div>
<h3 id="verify-docker-setup">使用 Hello World 测试 Docker 安装<a class="headerlink" href="#verify-docker-setup" title="Permanent link">&para;</a></h3>
<p>Docker 官方提供了最精简的 <code>hello-world</code> 镜像，可以用来验证 Docker 安装是否正确、是否正常工作。尝试运行 <code>docker run --rm hello-world</code> 看看吧。</p>
<div class="highlight"><pre><span></span><code>$ docker run --rm hello-world

Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.
    (amd64)
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
 https://hub.docker.com/

For more examples and ideas, visit:
 https://docs.docker.com/get-started/
</code></pre></div>
<p>如果你看到了像上面这样的输出，说明你安装的 Docker 已经一切准备就绪，可以使用了。</p>
<h2 id="use-docker">使用 Docker 容器<a class="headerlink" href="#use-docker" title="Permanent link">&para;</a></h2>
<p>接下来我们来尝试几个例子，体验 Docker 环境的独立性与易用性。</p>
<h3 id="use-ubuntu-bash">在 Ubuntu 容器中使用 shell<a class="headerlink" href="#use-ubuntu-bash" title="Permanent link">&para;</a></h3>
<ul>
<li><code>docker run -it --rm ubuntu</code></li>
</ul>
<p>这里，<code>--rm</code> 代表容器停止运行（退出）之后，会被立刻删除。</p>
<p><code>-it</code> 是为了获得可交互的 Shell 所必须的。<code>-i</code> 会将容器的 init（主进程，这里是 <code>/bin/bash</code>）的标准输入与 <code>docker</code> 这个程序的标准输入相连接；而 <code>-t</code> 会告知主进程输入为终端（TTY）设备。</p>
<p>在执行以上命令之后，你会获得一个 Ubuntu 20.04 的容器环境，退出 Shell 之后容器就会被销毁。</p>
<p>如果没有加上 <code>--rm</code>，退出后可以使用 <code>docker ps -a</code> 或者 <code>docker container ls</code> 查看系统中所有的容器。</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>sudo docker ps -a
<span class="go">CONTAINER ID        IMAGE                 COMMAND                  CREATED             STATUS                         PORTS               NAMES</span>
<span class="go">39d8ef1d4acf        ubuntu                &quot;/bin/bash&quot;              6 seconds ago       Exited (0) 3 seconds ago                           gracious_brahmagupta</span>
</code></pre></div>
<p>之后使用 <code>docker start</code> 启动容器。</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>sudo docker start -ai 39d
<span class="gp">root@39d8ef1d4acf:/#</span>
</code></pre></div>
<p><code>-a</code> 代表连接输出以及信号。这里不需要输入完整的 ID，只需要前几位即可。</p>
<p>如果忘记加上了参数直接启动，也可以使用 <code>docker attach</code> 将容器的主进程的输入输出接上。</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>sudo docker attach 39d
<span class="gp">root@39d8ef1d4acf:/#</span>
</code></pre></div>
<p><code>docker exec</code> 也可以完成相似的事情：它可以在容器中执行指定的命令（当然也包括 Shell 了）。</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>sudo docker <span class="nb">exec</span> -it 39d bash
<span class="gp">root@39d8ef1d4acf:/#</span>
</code></pre></div>
<p>由于 <code>docker exec</code> 创建的进程不是主进程，退出后容器也不会退出，适合需要调试容器的场合。</p>
<p>与 <code>docker start</code> 相对应，<code>docker stop</code> 可以关闭一个容器，<code>docker rm</code> 可以删除一个容器。</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>sudo docker stop 39d
<span class="go">39d</span>
<span class="gp">$ </span>sudo docker rm 39d
<span class="go">39d</span>
</code></pre></div>
<h3 id="use-python-repl">在 Python 容器中使用 Python 命令行<a class="headerlink" href="#use-python-repl" title="Permanent link">&para;</a></h3>
<ul>
<li><code>docker run -it --name python3 python</code></li>
</ul>
<p>与上面的例子类似，执行之后会获得一个 Python 3 最新版本的环境。这里我们通过 <code>--name</code> 将创建的容器命名为 <code>python3</code>。之后的容器操作中我们就不需要查询容器 ID，直接使用 <code>python3</code> 代表这个容器即可。</p>
<h3 id="use-mkdocs-material-build">在 MkDocs 容器中构建本书<a class="headerlink" href="#use-mkdocs-material-build" title="Permanent link">&para;</a></h3>
<ul>
<li>从 GitHub 上获取本书源码：<code>git clone https://github.com/ustclug/Linux101-docs.git</code></li>
<li><code>docker run --rm -v ${PWD}/Linux101-docs:/docs -p 8000:8000 squidfunk/mkdocs-material</code></li>
</ul>
<p>在执行完成之后，可以使用浏览器访问本地的 8000 端口，以查看构建结果。</p>
<p>这里多出了两个参数：</p>
<ul>
<li><code>-v</code>: 代表将本地的文件（夹）「挂载」（实际是 bind mount）到容器的对应目录中（这里是 <code>/docs</code>）。注意这个参数只接受绝对路径，所以这里读取了 <code>PWD</code> 这个变量，通过拼接的方式拼出绝对路径。</li>
<li><code>-p 8000:8000</code>: 代表将容器的 8000 端口暴露在主机的 8000 端口上，否则容器外部访问不了 8000 端口。</li>
<li>另外，我们不需要在终端中与容器中的进程进行交互，所以没有设置 <code>-it</code> 参数。</li>
</ul>
<h2 id="build-docker-image">构建自己的 Docker 镜像<a class="headerlink" href="#build-docker-image" title="Permanent link">&para;</a></h2>
<h3 id="build-manually">手工构建镜像<a class="headerlink" href="#build-manually" title="Permanent link">&para;</a></h3>
<p><code>docker commit</code> 命令可以从当前运行的容器新建镜像。以下是一个简单的例子：</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>sudo docker run -it ubuntu
<span class="gp">root@82d245a5a4a1:/# </span>apt update <span class="o">&amp;&amp;</span> apt install curl
<span class="go">（输出省略）</span>
<span class="gp">root@82d245a5a4a1:/# </span><span class="nb">exit</span>
<span class="go">exit</span>
<span class="gp">$ </span>sudo docker ps -a
<span class="go">CONTAINER ID        IMAGE                COMMAND                  CREATED             STATUS                      PORTS               NAMES</span>
<span class="go">82d245a5a4a1        ubuntu               &quot;/bin/bash&quot;              2 minutes ago       Exited (0) 23 seconds ago                       laughing_elgamal</span>
<span class="gp">$ </span>sudo docker commit 82d245a5a4a1
<span class="go">sha256:fe0a84d81b867949b27bacec4794303852b05ae76df14818bae85751b14f6e20</span>
<span class="gp">$ </span>sudo docker images
<span class="go">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span>
<span class="go">&lt;none&gt;              &lt;none&gt;              fe0a84d81b86        54 seconds ago      116MB</span>
<span class="gp">$ </span>sudo docker save fe0a84d81b86 &gt; example.tar
<span class="gp">$ </span>ls -lh example.tar
<span class="go">-rw-r--r-- 1 tao tao 114M Feb 10 17:48 example.tar</span>
</code></pre></div>
<p>得到的 example.tar 即为我们的 Docker 镜像。可以使用 <code>docker load &lt; example.tar</code> 的方式在其他环境中加载。但是，从可维护性等方面考虑，我们更推荐以下使用 Dockerfile 的做法。</p>
<h3 id="build-with-dockerfile">使用 Dockerfile 自动化构建<a class="headerlink" href="#build-with-dockerfile" title="Permanent link">&para;</a></h3>
<p>Dockerfile 是构建 Docker 镜像的标准格式，下面会举一些例子。我们会基于这些例子简单介绍 Dockerfile 的语法。</p>
<h4 id="cross-compile-example">构建简单的交叉编译环境<a class="headerlink" href="#cross-compile-example" title="Permanent link">&para;</a></h4>
<p>这个例子尝试使用 Debian 仓库中的 RISC-V 交叉编译<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup>工具链与 QEMU 模拟器构建一个简单的用于交叉编译的环境。</p>
<div class="highlight"><pre><span></span><code><span class="k">FROM</span> <span class="s">debian:buster-slim</span>

<span class="k">RUN</span> sed -i <span class="s1">&#39;s/deb.debian.org/mirrors.ustc.edu.cn/g&#39;</span> /etc/apt/sources.list <span class="o">&amp;&amp;</span> <span class="se">\</span>
    apt update <span class="o">&amp;&amp;</span> apt install -y gcc-riscv64-linux-gnu g++-riscv64-linux-gnu libc6-dev-riscv64-cross <span class="se">\</span>
                                 binutils-riscv64-linux-gnu libstdc++-dev-riscv64-cross <span class="se">\</span>
                                 qemu-system-misc qemu-user-static qemu-user binfmt-support <span class="se">\</span>
                                 fish vim --no-install-recommends
<span class="k">RUN</span> mkdir /workspace/

<span class="k">WORKDIR</span><span class="s"> /workspace/</span>
<span class="k">ENV</span> <span class="nv">QEMU_LD_PREFIX</span><span class="o">=</span>/usr/riscv64-linux-gnu/

<span class="k">CMD</span> <span class="p">[</span><span class="s2">&quot;fish&quot;</span><span class="p">]</span>
</code></pre></div>
<p>通过使用 <code>docker build</code>，我们可以构建出镜像。</p>
<div class="highlight"><pre><span></span><code><span class="go">sudo docker build -t riscv-cross:example .</span>
</code></pre></div>
<p><code>-t riscv-cross:example</code> 代表为这个镜像打上 <code>riscv-cross:example</code> 的标签。构建完成后，使用 <code>docker run</code> 执行即可：</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>sudo docker run -v <span class="si">${</span><span class="nv">PWD</span><span class="si">}</span>/workspace:/workspace -it riscv-cross:example
<span class="go">Welcome to fish, the friendly interactive shell</span>
<span class="gp">root@dec3d33003ee /workspace# </span>vim helloworld.c
<span class="gp">root@dec3d33003ee /workspace# </span>riscv64-linux-gnu-gcc helloworld.c
<span class="gp">root@dec3d33003ee /workspace# </span>qemu-riscv64 ./a.out
<span class="go">Hello, world!</span>
</code></pre></div>
<p>从这个例子中，我们可以看到 Dockerfile 的一些指令：</p>
<ol>
<li><code>FROM</code> 定义了基础镜像，之后执行的命令都是在基础镜像之上进行操作。如果希望基础镜像为空，可以使用 <code>FROM scratch</code>。</li>
<li><code>RUN</code> 指定了在镜像中执行的命令。可以注意到，我们将多个命令合并在了一起执行，这有助于减小镜像的冗余大小。</li>
<li><code>WORKDIR</code> 可以切换当前的所在的工作目录。</li>
<li><code>ENV</code> 指定了当前的环境变量。</li>
<li><code>CMD</code> 指定了容器启动时执行的命令。</li>
</ol>
<p>Docker 在根据 Dockerfile 构建时，会从上到下执行这些指令，每条指令对应镜像的一层。Docker 容器镜像的独特之处就在于它的分层设计：在构建镜像时每层的更改会叠加在上一层上（这意味着，上一层的所有数据仍然会保留，即使在新的一层删除了）；如果某一层已经存在，Docker 会直接使用这一层，节约构建的时间和占用的空间。</p>
<details class="tips"><summary>镜像分层是如何实现的？</summary><p>Docker 默认使用 OverlayFS 存储镜像。Overlay 文件系统允许用户将一个目录挂在另一个只读的目录上，所有修改都记录在可写的上层上。这种特性在 Linux LiveCD 中非常有用：可以将只读的 LiveCD 和硬盘上的目录使用 Overlay 文件系统挂载在一起，然后所有的修改都可以存储在硬盘上。</p>
</details>
<div class="admonition tip">
<p class="admonition-title">尽量减少 Docker 镜像的层数</p>
<p>因为 Docker 容器镜像的分层设计，上面提到，<code>RUN</code> 中将多个命令通过 <code>&amp;&amp;</code> 的方式合并在了一起执行，有助于减小镜像的冗余大小。Dockerfile 不是 Shell 脚本，请避免每条命令都使用单独的 <code>RUN</code> 来执行的写法，以下是一个生产环境的错误例子节选（删除了某些部分以方便展示），<strong>无论如何，请不要这么写 Dockerfile</strong>：</p>
<div class="highlight"><pre><span></span><code><span class="k">FROM</span> <span class="s">centos:7</span>

<span class="k">RUN</span> yum -y install wget make yum-utils

<span class="k">RUN</span> yum-builddep python -y

<span class="k">RUN</span> yum -y install gcc
<span class="k">RUN</span> yum -y install vim
<span class="k">RUN</span> yum -y install mariadb-devel

<span class="k">RUN</span> wget -O /tmp/Python-3.7.3.tgz https://www.python.org/ftp/python/3.7.3/Python-3.7.3.tgz
<span class="k">RUN</span> tar -zxvf /tmp/Python-3.7.3.tgz -C /tmp/
<span class="k">RUN</span> /tmp/Python-3.7.3/configure
<span class="k">RUN</span> make <span class="o">&amp;&amp;</span> make install

<span class="k">RUN</span> rm -f /usr/bin/python
<span class="k">RUN</span> ln -s /usr/local/bin/python3 /usr/bin/python
<span class="k">RUN</span> ln -s /usr/local/bin/pip3 /usr/bin/pip

<span class="k">RUN</span> pip install --upgrade pip

<span class="k">RUN</span> sed -i <span class="s1">&#39;s/python/python2/&#39;</span> /usr/bin/yum

<span class="k">RUN</span> rm -rf /tmp/Python-3.7.3*
<span class="k">RUN</span> yum clean all
</code></pre></div>
<p>当然，这不等于说必须要把所有命令都写在一条 <code>RUN</code> 里面。对于执行时间很长的命令，可以考虑放在 Dockerfile 的开头，并且使用单独的 <code>RUN</code> 运行，因为 Docker 在构建镜像时，可以重复使用之前构建好的层。这么做可以节约构建与调试 Dockerfile 的时间。</p>
</div>
<h4 id="flask-production-example">在生产环境中运行使用 Flask 编写的简单网站<a class="headerlink" href="#flask-production-example" title="Permanent link">&para;</a></h4>
<p>Flask 是一个知名的 Python web 框架。本例子包含了一个运行 Flask 编写的网站的简单 Dockerfile（不包含数据库等部分）：</p>
<div class="highlight"><pre><span></span><code><span class="k">FROM</span> <span class="s">tiangolo/uwsgi-nginx-flask:python3.8</span>

<span class="k">RUN</span> pip3 config <span class="nb">set</span> global.index-url https://mirrors.bfsu.edu.cn/pypi/web/simple
<span class="k">RUN</span> pip3 install pyopenssl

<span class="k">COPY</span> ./app /app
</code></pre></div>
<p>这里使用了 <code>COPY</code> 指令，将本地的 <code>app</code> 目录复制进容器镜像的 <code>/app</code> 中。</p>
<h2 id="docker-compose">使用 Docker Compose 自动运行容器<a class="headerlink" href="#docker-compose" title="Permanent link">&para;</a></h2>
<p>Docker Compose 是一个方便的小型容器编排工具。</p>
<h3 id="_1">子项目？<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h3>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>交叉编译：指在某个平台上编译出另一个平台的程序。例如在 Linux 上使用 MinGW 工具链编译 Windows 程序即为一个交叉编译的例子。&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>
                
                  
                    

<hr>
<div class="md-source-date">
  <small>
    
      最后更新: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">August 30, 2021</span>
      
    
  </small>
</div>
                  
                
              
              
  
    <div class="md-source-date">
      <small>
        作者: <span class='git-page-authors git-authors'><a href='mailto:taoky1999@gmail.com'>taoky</a></span>
      </small>
    </div>
  

            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../Ch07/supplement/" class="md-footer__link md-footer__link--prev" aria-label="上一页: 拓展阅读" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                上一页
              </span>
              拓展阅读
            </div>
          </div>
        </a>
      
      
        
        <a href="supplement/" class="md-footer__link md-footer__link--next" aria-label="下一页: 拓展阅读" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                下一页
              </span>
              拓展阅读
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Brought to you by <a href="https://lug.ustc.edu.cn/">LUG@USTC</a>. Available freely under the <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0 license</a>.
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://lug.ustc.edu.cn/" target="_blank" rel="noopener" title="lug.ustc.edu.cn" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.543 7.25h2.733c.144-2.074.866-3.756 1.58-4.948.12-.197.237-.381.353-.552a6.506 6.506 0 0 0-4.666 5.5zm2.733 1.5H1.543a6.506 6.506 0 0 0 4.666 5.5 11.13 11.13 0 0 1-.352-.552c-.715-1.192-1.437-2.874-1.581-4.948zm1.504 0h4.44a9.637 9.637 0 0 1-1.363 4.177c-.306.51-.612.919-.857 1.215a9.978 9.978 0 0 1-.857-1.215A9.637 9.637 0 0 1 5.78 8.75zm4.44-1.5H5.78a9.637 9.637 0 0 1 1.363-4.177c.306-.51.612-.919.857-1.215.245.296.55.705.857 1.215A9.638 9.638 0 0 1 10.22 7.25zm1.504 1.5c-.144 2.074-.866 3.756-1.58 4.948-.12.197-.237.381-.353.552a6.506 6.506 0 0 0 4.666-5.5h-2.733zm2.733-1.5h-2.733c-.144-2.074-.866-3.756-1.58-4.948a11.738 11.738 0 0 0-.353-.552 6.506 6.506 0 0 1 4.666 5.5zM8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.top"], "translations": {"clipboard.copy": "\u590d\u5236", "clipboard.copied": "\u5df2\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\uff0c\\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.409db549.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.56a63758.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
      
    
  </body>
</html>